<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SoundWave Studio - Reprodutor Avan√ßado</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .container {
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            padding: 30px 0;
            margin-bottom: 20px;
        }
        
        h1 {
            font-size: 3.5rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 15px rgba(78, 205, 196, 0.3);
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #e0e0e0;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .player-container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .visualization-section {
            flex: 1;
            min-width: 300px;
            background: rgba(30, 30, 50, 0.7);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
        }
        
        .controls-section {
            flex: 1;
            min-width: 300px;
            background: rgba(30, 30, 50, 0.7);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
        }
        
        .section-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #4ecdc4;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .visualizer-container {
            height: 250px;
            background: rgba(10, 10, 20, 0.5);
            border-radius: 15px;
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(78, 205, 196, 0.3);
        }
        
        canvas {
            width: 100%;
            height: 100%;
        }
        
        .track-info {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            padding: 15px;
            background: rgba(20, 20, 40, 0.5);
            border-radius: 15px;
        }
        
        .album-art {
            width: 100px;
            height: 100px;
            border-radius: 10px;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
        }
        
        .track-details {
            flex: 1;
        }
        
        .track-title {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .track-artist {
            font-size: 1.2rem;
            color: #a0a0c0;
        }
        
        .progress-container {
            background: rgba(40, 40, 60, 0.5);
            height: 8px;
            border-radius: 4px;
            margin: 20px 0;
            cursor: pointer;
            position: relative;
        }
        
        .progress-bar {
            height: 100%;
            width: 0;
            background: linear-gradient(to right, #ff6b6b, #4ecdc4);
            border-radius: 4px;
            position: relative;
        }
        
        .progress-bar::after {
            content: '';
            position: absolute;
            right: -8px;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #fff;
            box-shadow: 0 0 10px rgba(78, 205, 196, 0.8);
        }
        
        .time-info {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #a0a0c0;
            margin-top: 5px;
        }
        
        .player-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 25px 0;
        }
        
        .control-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(40, 40, 60, 0.7);
            border: none;
            color: #fff;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .control-btn:hover {
            background: rgba(78, 205, 196, 0.8);
            transform: scale(1.1);
        }
        
        .control-btn.play-pause {
            width: 70px;
            height: 70px;
            font-size: 2rem;
            background: rgba(78, 205, 196, 0.8);
        }
        
        .equalizer {
            margin: 25px 0;
        }
        
        .eq-slider {
            margin-bottom: 20px;
        }
        
        .eq-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 1rem;
            color: #e0e0e0;
        }
        
        .slider-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .eq-name {
            width: 80px;
        }
        
        .slider {
            flex: 1;
            height: 8px;
            -webkit-appearance: none;
            background: rgba(40, 40, 60, 0.7);
            border-radius: 4px;
            outline: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4ecdc4;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(78, 205, 196, 0.8);
        }
        
        .effects-controls {
            margin: 30px 0;
        }
        
        .effect {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: rgba(20, 20, 40, 0.5);
            border-radius: 10px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }
        
        .effect:hover {
            background: rgba(30, 30, 50, 0.7);
        }
        
        .effect-name {
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .effect-controls {
            display: flex;
            gap: 10px;
        }
        
        .effect-btn {
            padding: 8px 15px;
            border-radius: 20px;
            border: none;
            background: rgba(40, 40, 60, 0.7);
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .effect-btn:hover {
            background: rgba(78, 205, 196, 0.8);
        }
        
        .playlist {
            width: 100%;
            background: rgba(30, 30, 50, 0.7);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            margin-bottom: 40px;
        }
        
        .playlist-title {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #ff6b6b;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .playlist-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
        }
        
        .playlist-item {
            display: flex;
            align-items: center;
            padding: 15px;
            background: rgba(20, 20, 40, 0.5);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .playlist-item:hover {
            background: rgba(40, 40, 60, 0.7);
            transform: translateY(-3px);
        }
        
        .playlist-item.playing {
            background: rgba(78, 205, 196, 0.3);
            border-left: 4px solid #4ecdc4;
        }
        
        .playlist-art {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            margin-right: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }
        
        .playlist-info {
            flex: 1;
        }
        
        .playlist-track {
            font-weight: bold;
            margin-bottom: 3px;
        }
        
        .playlist-artist {
            font-size: 0.9rem;
            color: #a0a0c0;
        }
        
        .playlist-duration {
            font-size: 0.9rem;
            color: #a0a0c0;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            color: #a0a0c0;
            font-size: 0.9rem;
            width: 100%;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: auto;
        }
        
        @media (max-width: 768px) {
            .player-container {
                flex-direction: column;
            }
            
            h1 {
                font-size: 2.5rem;
            }
        }
        
        .color-1 { background: linear-gradient(45deg, #ff6b6b, #ff8e8e); }
        .color-2 { background: linear-gradient(45deg, #4ecdc4, #6de0d7); }
        .color-3 { background: linear-gradient(45deg, #ffbe0b, #ffd54f); }
        .color-4 { background: linear-gradient(45deg, #8338ec, #a368fc); }
        .color-5 { background: linear-gradient(45deg, #3a86ff, #6ba2ff); }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>SoundWave Studio</h1>
            <p class="subtitle">Reprodutor de m√∫sica avan√ßado com visualiza√ß√£o gr√°fica, equalizador e efeitos sonoros personalizados. Controle cada aspecto da sua experi√™ncia musical.</p>
        </header>
        
        <div class="player-container">
            <div class="visualization-section">
                <h2 class="section-title"><i class="fas fa-wave-square"></i> Visualiza√ß√£o</h2>
                <div class="visualizer-container">
                    <canvas id="visualizer"></canvas>
                </div>
                
                <div class="track-info">
                    <div class="album-art color-1">
                        <i class="fas fa-music"></i>
                    </div>
                    <div class="track-details">
                        <div class="track-title" id="current-track">Carregando...</div>
                        <div class="track-artist" id="current-artist">Artista</div>
                    </div>
                </div>
                
                <div class="progress-container" id="progress-container">
                    <div class="progress-bar" id="progress-bar"></div>
                </div>
                <div class="time-info">
                    <span id="current-time">0:00</span>
                    <span id="total-time">0:00</span>
                </div>
                
                <div class="player-controls">
                    <button class="control-btn" id="prev-btn" title="Anterior">
                        <i class="fas fa-step-backward"></i>
                    </button>
                    <button class="control-btn play-pause" id="play-pause-btn" title="Play/Pause">
                        <i class="fas fa-play" id="play-icon"></i>
                    </button>
                    <button class="control-btn" id="next-btn" title="Pr√≥xima">
                        <i class="fas fa-step-forward"></i>
                    </button>
                </div>
            </div>
            
            <div class="controls-section">
                <h2 class="section-title"><i class="fas fa-sliders-h"></i> Equalizador</h2>
                <div class="equalizer">
                    <div class="eq-slider">
                        <div class="eq-label">
                            <span>Graves</span>
                            <span id="bass-value">0 dB</span>
                        </div>
                        <div class="slider-container">
                            <span class="eq-name"><i class="fas fa-volume-down"></i></span>
                            <input type="range" min="-12" max="12" value="0" class="slider" id="bass-slider">
                            <span class="eq-name"><i class="fas fa-volume-up"></i></span>
                        </div>
                    </div>
                    
                    <div class="eq-slider">
                        <div class="eq-label">
                            <span>M√©dios</span>
                            <span id="mid-value">0 dB</span>
                        </div>
                        <div class="slider-container">
                            <span class="eq-name"><i class="fas fa-volume-down"></i></span>
                            <input type="range" min="-12" max="12" value="0" class="slider" id="mid-slider">
                            <span class="eq-name"><i class="fas fa-volume-up"></i></span>
                        </div>
                    </div>
                    
                    <div class="eq-slider">
                        <div class="eq-label">
                            <span>Agudos</span>
                            <span id="treble-value">0 dB</span>
                        </div>
                        <div class="slider-container">
                            <span class="eq-name"><i class="fas fa-volume-down"></i></span>
                            <input type="range" min="-12" max="12" value="0" class="slider" id="treble-slider">
                            <span class="eq-name"><i class="fas fa-volume-up"></i></span>
                        </div>
                    </div>
                </div>
                
                <h2 class="section-title"><i class="fas fa-wand-magic-sparkles"></i> Efeitos Sonoros</h2>
                <div class="effects-controls">
                    <div class="effect">
                        <div class="effect-name">
                            <i class="fas fa-volume-off"></i> Remover Ru√≠do
                        </div>
                        <div class="effect-controls">
                            <button class="effect-btn" id="noise-reduction-btn">Ativar</button>
                        </div>
                    </div>
                    
                    <div class="effect">
                        <div class="effect-name">
                            <i class="fas fa-water"></i> Reverb
                        </div>
                        <div class="effect-controls">
                            <button class="effect-btn" id="reverb-btn">Ativar</button>
                        </div>
                    </div>
                    
                    <div class="effect">
                        <div class="effect-name">
                            <i class="fas fa-echo"></i> Eco
                        </div>
                        <div class="effect-controls">
                            <button class="effect-btn" id="echo-btn">Ativar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="playlist">
            <h2 class="playlist-title"><i class="fas fa-list-music"></i> Playlist</h2>
            <div class="playlist-items" id="playlist">
                </div>
        </div>
    </div>
    
    <footer>
        <p>SoundWave Studio &copy; 2023 - Reprodutor de M√∫sica Avan√ßado</p>
    </footer>

    <script>
        // Elementos do DOM
        const currentTrackEl = document.getElementById('current-track');
        const currentArtistEl = document.getElementById('current-artist');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const playIcon = document.getElementById('play-icon');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const progressBar = document.getElementById('progress-bar');
        const progressContainer = document.getElementById('progress-container');
        const currentTimeEl = document.getElementById('current-time');
        const totalTimeEl = document.getElementById('total-time');
        const playlistEl = document.getElementById('playlist');
        const visualizer = document.getElementById('visualizer');
        const ctx = visualizer.getContext('2d');

        // Controles de Equalizador (para futura implementa√ß√£o)
        const bassSlider = document.getElementById('bass-slider');
        const midSlider = document.getElementById('mid-slider');
        const trebleSlider = document.getElementById('treble-slider');
        const bassValueEl = document.getElementById('bass-value');
        const midValueEl = document.getElementById('mid-value');
        const trebleValueEl = document.getElementById('treble-value');

        // Efeitos Sonoros (para futura implementa√ß√£o)
        const noiseReductionBtn = document.getElementById('noise-reduction-btn');
        const reverbBtn = document.getElementById('reverb-btn');
        const echoBtn = document.getElementById('echo-btn');

        // M√∫sica e playlist
        const playlistData = [ // Renomeado para evitar conflito com a vari√°vel global 'playlist' do DOM
            {
                title: "N√£o existe amor em SP",
                artist: "Criolo",
                duration: "3:45",
                color: "color-1",
                file: "./musicas/criolo.mp3"
            },
            {
                title: "Bass Revolution",
                artist: "Deep Bass Collective",
                duration: "4:20",
                color: "color-2",
                file: "./musicas/Ana Vilela.mp3"
            },
            {
                title: "Midnight Drive",
                artist: "Neon Dreams",
                duration: "3:30",
                color: "color-3",
                file: "./musicas/vento no litoral.mp3"
            },
            {
                title: "Digital Sunrise",
                artist: "Circuit Masters",
                duration: "5:15",
                color: "color-4",
                file: "./musicas/La Solitudine.mp3"
            },
            {
                title: "Cosmic Harmony",
                artist: "Space Echo",
                duration: "4:50",
                color: "color-5",
                file: "./musicas/A Via L√°ctea.mp3"
            }
        ];

        let currentTrackIndex = 0;
        let isPlaying = false;
        const audioElement = new Audio();
        let audioContext;
        let analyser;
        let source;
        let animationId;
        let isInitialized = false; // Flag para garantir que o AudioContext seja configurado apenas uma vez

        // Fun√ß√µes do Player
        function loadTrack(index) {
            const track = playlistData[index];
            currentTrackEl.textContent = track.title;
            currentArtistEl.textContent = track.artist;
            
            // Atualiza a arte do √°lbum com a cor da faixa
            const albumArtEl = document.querySelector('.album-art');
            albumArtEl.className = `album-art ${track.color}`;

            audioElement.src = track.file;
            audioElement.load(); // Carrega a m√∫sica
            
            // Reseta tempo
            currentTimeEl.textContent = '0:00';
            progressBar.style.width = '0%';
            
            // Remove a classe 'playing' de todas as faixas e adiciona √† faixa atual
            document.querySelectorAll('.playlist-item').forEach((item, i) => {
                item.classList.toggle('playing', i === index);
            });

            // Quando os metadados s√£o carregados, atualizamos a dura√ß√£o
            audioElement.addEventListener('loadedmetadata', () => {
                const duration = audioElement.duration;
                const minutes = Math.floor(duration / 60);
                const seconds = Math.floor(duration % 60);
                totalTimeEl.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
            });
        }

        function playTrack() {
            // Verifica se o contexto de √°udio est√° suspenso (pol√≠tica de autoplay)
            if (audioContext.state === 'suspended') {
                audioContext.resume();
            }
            
            audioElement.play()
                .then(() => {
                    isPlaying = true;
                    playIcon.className = 'fas fa-pause';
                    // Adiciona o listener de timeupdate somente quando a m√∫sica come√ßa a tocar
                    audioElement.addEventListener('timeupdate', updateProgress);
                })
                .catch(error => {
                    console.error("Erro ao reproduzir:", error);
                    alert("N√£o foi poss√≠vel reproduzir a m√∫sica. Verifique se o navegador permite autoplay ou tente interagir com a p√°gina primeiro (clicar em play).");
                });
        }

        function pauseTrack() {
            audioElement.pause();
            isPlaying = false;
            playIcon.className = 'fas fa-play';
            audioElement.removeEventListener('timeupdate', updateProgress); // Remove o listener ao pausar
        }

        function togglePlayPause() {
            if (isPlaying) {
                pauseTrack();
            } else {
                playTrack();
            }
        }

        function nextTrack() {
            currentTrackIndex = (currentTrackIndex + 1) % playlistData.length;
            loadTrack(currentTrackIndex);
            if (isPlaying) {
                playTrack();
            }
        }

        function prevTrack() {
            currentTrackIndex = (currentTrackIndex - 1 + playlistData.length) % playlistData.length;
            loadTrack(currentTrackIndex);
            if (isPlaying) {
                playTrack();
            }
        }

        function updateProgress() {
            const { currentTime, duration } = audioElement;
            const progressPercent = (currentTime / duration) * 100;
            progressBar.style.width = `${progressPercent}%`;
            
            // Atualizar tempo atual
            const minutes = Math.floor(currentTime / 60);
            const seconds = Math.floor(currentTime % 60);
            currentTimeEl.textContent = `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;

            // Se a m√∫sica terminar, ir para a pr√≥xima
            if (audioElement.ended) {
                nextTrack();
            }
        }

        function setProgress(e) {
            const width = this.clientWidth;
            const clickX = e.offsetX;
            const duration = audioElement.duration;
            audioElement.currentTime = (clickX / width) * duration;
        }

        // Fun√ß√µes de Renderiza√ß√£o
        function renderPlaylist() {
            playlistEl.innerHTML = ''; // Limpa a playlist existente
            playlistData.forEach((track, index) => {
                const playlistItem = document.createElement('div');
                playlistItem.classList.add('playlist-item');
                if (index === currentTrackIndex) {
                    playlistItem.classList.add('playing');
                }
                playlistItem.dataset.index = index; // Armazena o √≠ndice para f√°cil acesso

                playlistItem.innerHTML = `
                    <div class="playlist-art ${track.color}">
                        <i class="fas fa-music"></i>
                    </div>
                    <div class="playlist-info">
                        <div class="playlist-track">${track.title}</div>
                        <div class="playlist-artist">${track.artist}</div>
                    </div>
                    <div class="playlist-duration">${track.duration}</div>
                `;
                playlistItem.addEventListener('click', () => {
                    currentTrackIndex = index;
                    loadTrack(currentTrackIndex);
                    playTrack();
                });
                playlistEl.appendChild(playlistItem);
            });
        }

        // Configura√ß√£o de Event Listeners
        function setupEventListeners() {
            playPauseBtn.addEventListener('click', togglePlayPause);
            prevBtn.addEventListener('click', prevTrack);
            nextBtn.addEventListener('click', nextTrack);
            progressContainer.addEventListener('click', setProgress);
            window.addEventListener('resize', resizeCanvas); // Redimensiona o canvas quando a janela √© redimensionada
        }

        // Visualizador de √°udio
        function animateVisualizer() {
            if (!analyser) return; // Garante que o analyser esteja dispon√≠vel

            const bufferLength = analyser.frequencyBinCount;
            const dataArray = new Uint8Array(bufferLength);
            analyser.getByteTimeDomainData(dataArray); // Obt√©m os dados do dom√≠nio de tempo

            const width = visualizer.width;
            const height = visualizer.height;
            
            ctx.clearRect(0, 0, width, height); // Limpa o canvas a cada frame
            
            ctx.lineWidth = 2;
            ctx.strokeStyle = '#4ecdc4';
            ctx.shadowBlur = 15;
            ctx.shadowColor = '#4ecdc4';
            
            ctx.beginPath();
            
            const sliceWidth = width * 1.0 / bufferLength;
            let x = 0;
            
            for (let i = 0; i < bufferLength; i++) {
                const v = dataArray[i] / 128.0; // Normaliza para um valor entre 0 e 2
                const y = v * height / 2;
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
                
                x += sliceWidth;
            }
            
            ctx.lineTo(width, height / 2); // Linha final para garantir que a onda chegue at√© o final
            ctx.stroke();
            
            animationId = requestAnimationFrame(animateVisualizer); // Chama a fun√ß√£o novamente no pr√≥ximo frame
        }

        function resizeCanvas() {
            visualizer.width = visualizer.clientWidth;
            visualizer.height = visualizer.clientHeight;
        }

        // Fun√ß√µes de Equalizador (simplificadas, exigiria AudioContext e BiquadFilterNodes)
        function updateEqualizer() {
            bassValueEl.textContent = `${bassSlider.value} dB`;
            midValueEl.textContent = `${midSlider.value} dB`;
            trebleValueEl.textContent = `${trebleSlider.value} dB`;
            // Aqui voc√™ adicionaria a l√≥gica para aplicar os filtros de equaliza√ß√£o ao AudioContext
        }

        // Fun√ß√µes de Efeitos (simplificadas, exigiria AudioContext e outros nodes)
        function toggleEffect(button, effectName) {
            if (button.textContent === 'Ativar') {
                button.textContent = 'Desativar';
                button.style.background = 'rgba(255, 107, 107, 0.8)'; // Cor de desativa√ß√£o
                // L√≥gica para ativar o efeito
            } else {
                button.textContent = 'Ativar';
                button.style.background = 'rgba(40, 40, 60, 0.7)'; // Cor original
                // L√≥gica para desativar o efeito
            }
        }

        // Inicializa√ß√£o
        function init() {
            // Inicializa AudioContext e AnalyserNode apenas uma vez
            if (!isInitialized) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                analyser = audioContext.createAnalyser();
                analyser.fftSize = 256; // Ajusta a qualidade da visualiza√ß√£o

                // Conecta o elemento de √°udio ao contexto de √°udio
                // Precisa ser feito ap√≥s a primeira intera√ß√£o do usu√°rio devido √†s pol√≠ticas de autoplay
                audioElement.addEventListener('canplay', () => {
                    if (!source) { // Garante que a fonte seja criada apenas uma vez
                        source = audioContext.createMediaElementSource(audioElement);
                        source.connect(analyser);
                        analyser.connect(audioContext.destination);
                    }
                });
                isInitialized = true;
            }

            renderPlaylist();
            loadTrack(currentTrackIndex);
            setupEventListeners();
            resizeCanvas(); // Garante que o canvas tenha o tamanho correto na inicializa√ß√£o
            animateVisualizer(); // Inicia a anima√ß√£o do visualizador

            // Event listeners para os sliders do equalizador
            bassSlider.addEventListener('input', updateEqualizer);
            midSlider.addEventListener('input', updateEqualizer);
            trebleSlider.addEventListener('input', updateEqualizer);

            // Event listeners para os bot√µes de efeito
            noiseReductionBtn.addEventListener('click', () => toggleEffect(noiseReductionBtn, 'noise-reduction'));
            reverbBtn.addEventListener('click', () => toggleEffect(reverbBtn, 'reverb'));
            echoBtn.addEventListener('click', () => toggleEffect(echoBtn, 'echo'));
        }

        // Iniciar quando a p√°gina carregar
        window.addEventListener('load', init);
    </script>
</body>
</html>